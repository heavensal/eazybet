<%# pour chaque competition, on affiche en titre le title et tous ses events %>
 <%= render "filters/filters"   %>
<% @competitions.each do |competition| %>
  <div class="flex items-center border-l-3 border-[var(--ezb-red)] relative">
    <div class="absolute inset-0" style="background: linear-gradient(90deg, rgba(233, 69, 96, 0.2) 0%, rgba(233, 69, 96, 0) 100%);"></div>
    <h2 class="font-bold text-[var(--ezb-red)] relative z-10 p-4">
      <%= competition.title %>
    </h2>
  </div>

  <%= turbo_frame_tag "competition_events_#{competition.id}", src: competition_events_path(competition) do %>
    <p class="p-4 text-sm text-gray-400">Chargement des Ã©vÃ©nements...</p>
  <% end %>


<% end %>



<button id='openModalVideo' class="fixed bottom-[116px] left-1/2 -translate-x-1/2 z-[999] px-8 py-4
  bg-gradient-to-r from-[#e94560] to-[#ff6b81] border-none rounded-full
  text-white font-bold shadow-lg shadow-[rgba(233,69,96,0.3)] cursor-pointer
  transition-all duration-300 ease-in-out whitespace-nowrap max-w-[90%] text-center
 animate-bounce animate-infinite animate-duration-3000 animate-ease-in-out" >
  ðŸŽ¥ Regarder une vidÃ©o (+250 ðŸª™) â€¢ 20</button>

 <%= render "modal/modal-video"   %>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const openModalVideo = document.getElementById("openModalVideo");
    const closeModalVideo = document.getElementById("closeModalVideo");
    const modalVideo = document.getElementById('videoModal')

    const disableScroll = () => {
      document.body.style.overflow = 'hidden';
    };

    const enableScroll = () => {
      document.body.style.overflow = '';
    };

    if (openModalVideo && modalVideo) {
      openModalVideo.addEventListener("click", () => {
        modalVideo.showModal();
        disableScroll();
      });
    }


       if (closeModalVideo && modalVideo) {
      closeModalVideo.addEventListener("click", () => {
        modalVideo.close();
        enableScroll(); // RÃ©active le scroll lorsque la modal est fermÃ©e
      });
    }

     modalVideo?.addEventListener("click", (event) => {
      if (event.target === modalVideo) {
        modalVideo.close();
        enableScroll(); // RÃ©active le scroll si on ferme la modal en cliquant en dehors
      }
    });
  });
</script>
